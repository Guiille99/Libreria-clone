$(document).ready(function(){let n="";$("#btnAddTask").click(l),$("#btnModifyTask").click(i),$("#btnDeleteTask").click(d);var c=document.getElementById("calendar"),t=new FullCalendar.Calendar(c,{height:"auto",dayMaxEvents:3,expandRows:!0,windowResize:function(){},initialView:"dayGridMonth",headerToolbar:{left:"prev,next today",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay"},buttonText:{today:"Hoy"},views:{dayGridMonth:{buttonText:"Mes"},timeGridWeek:{buttonText:"Semana"},timeGridDay:{buttonText:"DÃ­a"}},selectable:!0,events:url,eventDidMount:function(e){if(e.event.extendedProps.status===1){var a=e.el;a.style.textDecoration="line-through"}},eventMouseEnter:function(e){$(e.el).tooltip({title:e.event.title,placement:"top"})},dateClick:function(e){if(s(),e.allDay)$("#fecInicio").val(e.dateStr),$("#fecFin").val(e.dateStr);else{let a=e.dateStr.split("T");$("#fecInicio").val(a[0]),$("#fecFin").val(a[0]),$("#horaInicio").val(a[1].substring(0,5))}$("#tareaModal").html("Nueva tarea"),$("#tarea_check-label").hide(),$("#btnModifyTask").hide(),$("#btnDeleteTask").hide(),$("#btnAddTask").show(),$("#modal-tarea").modal("show")},eventClick:function(e){$("#tareaModal").html("Tarea"),$("#btnAddTask").hide(),$("#btnModifyTask").show(),$("#btnDeleteTask").show(),n=e.event.id,$("#tarea").val(e.event.title),$("#fecInicio").val(moment(e.event.start).format("YYYY-MM-DD")),$("#horaInicio").val(moment(e.event.start).format("HH:mm")),$("#fecFin").val(moment(e.event.end).format("YYYY-MM-DD")),$("#horaFin").val(moment(e.event.end).format("HH:mm")),$("#tarea_check-label").show(),$("#colorFondo").val(e.event.backgroundColor),$("#colorTexto").val(e.event.textColor),e.event.extendedProps.status===1&&$("#tarea_check").prop("checked",!0),$("#modal-tarea").modal("show")}});t.render(),t.setOption("locale","es");function l(){let e=r(),a=$("input[name='_token']").val();$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$.ajax({async:!0,method:"POST",dataType:"html",contentType:"application/x-www-form-urlencoded",url:addTaskURL,data:{token:a,tarea:e.tarea,fechaInicio:e.fechaInicio,fechaFin:e.fechaFin,horaInicio:e.horaInicio,horaFin:e.horaFin,colorFondo:e.colorFondo,colorTexto:e.colorTexto},success:function(o){console.log(o),$("#modal-tarea").modal("hide"),t.prev(),t.next()},error:function(o){console.log(o)}})}function i(){let e=r(),a=$("input[name='_token']").val();$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$.ajax({async:!0,method:"PUT",dataType:"html",contentType:"application/x-www-form-urlencoded",url:modifyTaskURL,data:{id:n,token:a,tarea:e.tarea,fechaInicio:e.fechaInicio,fechaFin:e.fechaFin,horaInicio:e.horaInicio,horaFin:e.horaFin,tareaRealizada:e.check,colorFondo:e.colorFondo,colorTexto:e.colorTexto},success:function(o){console.log(o),$("#modal-tarea").modal("hide"),t.prev(),t.next()},error:function(o){console.log(o)}})}function d(){let e=$("input[name='_token']").val();$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$.ajax({async:!0,method:"DELETE",dataType:"html",contentType:"application/x-www-form-urlencoded",url:deleteTaskURL,data:{id:n,token:e},success:function(a){$("#modal-tarea").modal("hide"),t.prev(),t.next()},error:function(a){console.log(a)}})}function r(){return{tarea:$("#tarea").val(),fechaInicio:$("#fecInicio").val(),horaInicio:$("#horaInicio").val(),fechaFin:$("#fecFin").val(),horaFin:$("#horaFin").val(),check:$("#tarea_check").prop("checked"),colorFondo:$("#colorFondo").val(),colorTexto:$("#colorTexto").val()}}function s(){$("#tarea").val(""),$("#fecInicio").val(""),$("#horaInicio").val(""),$("#fecFin").val(""),$("#horaFin").val(""),$("#colorFondo").val("#2596be"),$("#colorTexto").val("#111111")}$(".tasks").change(function(){$(".tasklist__container .btn-modify").css("display","block")})});
